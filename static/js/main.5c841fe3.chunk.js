(this["webpackJsonpweathering-image"]=this["webpackJsonpweathering-image"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(5),l=a.n(i);a(2);var u=function(e){return r.a.createElement("header",null,r.a.createElement("h1",null,document.title),r.a.createElement("p",null,"\ub514\uc9c0\ud138 \ud48d\ud654\ub97c \uc88b\uc544\ud558\uc2dc\ub294 \uc5ec\ub7ec\ubd84\uc744 \uc704\ud55c \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4. \uc800\ud654\uc9c8\uc758 \uc774\ubbf8\uc9c0\ub97c \uc27d\uace0 \ube60\ub974\uac8c \ub9cc\ub4e4\uc5b4 \ubcf4\uc138\uc694!"))},c="https://github.com/juo6442/weathering-image";var o=function(e){return r.a.createElement("footer",null,r.a.createElement("hr",null),r.a.createElement("p",null,"GitHub: ",r.a.createElement("a",{href:c},c)))},d=a(6),g=a(7),h=a(9),m=a(8),s=a(1),f=a.n(s),p=a(3);function v(e){return new Promise((function(t){var a=new Image;a.onload=function(){t(a)},a.src=e}))}function w(){return(w=Object(p.a)(f.a.mark((function e(t,a){var n,r,i,l,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return","");case 2:return e.next=4,v(t);case 4:return n=e.sent,r=document.createElement("canvas"),i=n.width*n.height,l=a<i?Math.sqrt(a/i):1,r.width=parseInt(n.width*l),r.height=parseInt(n.height*l),(u=r.getContext("2d")).fillStyle="white",u.fillRect(0,0,r.width,r.height),u.drawImage(n,0,0,r.width,r.height),e.abrupt("return",r.toDataURL("image/jpeg",1));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,a,n){var r=document.createElement("canvas");r.width=a,r.height=n;var i=r.getContext("2d");return i.fillRect(0,0,r.width,r.height),i.drawImage(e,0,0,r.width,r.height),r.toDataURL("image/jpeg",t)}function D(e,t,a,n,r,i){var l=document.createElement("canvas");l.width=r,l.height=i;var u=l.getContext("2d");return u.drawImage(e,0,0,l.width,l.height),u.globalCompositeOperation="overlay",u.fillStyle="black",u.globalAlpha=t,u.fillRect(0,0,l.width,l.height),u.globalCompositeOperation="color-burn",u.fillStyle="rgb(230, 225, 170)",u.globalAlpha=a,u.fillRect(0,0,l.width,l.height),l.toDataURL("image/jpeg",n)}function b(){return(b=Object(p.a)(f.a.mark((function e(t,a){var n,r,i,l,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return","");case 2:return e.next=4,v(t);case 4:return n=e.sent,r=n.width,i=n.height,u=I(n,(100-a)/100,r*(l=.5*(1-a/100)+.5),i*l),e.t0=D,e.next=12,v(u);case 12:return e.t1=e.sent,e.t2=a/100*.1,e.t3=a/100,e.t4=(100-a)/100,e.t5=r,e.t6=i,u=(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5,e.t6),e.abrupt("return",u);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={imageData:null,degrade:0,degradedImageData:null,degradedImageDataCache:null},n.loadSampleImage(),n}return Object(g.a)(a,[{key:"handleImageLoad",value:function(e){var t=this;(function(e,t){return w.apply(this,arguments)})(e,225e4).then((function(e){var a=new Map;a.set(0,e),t.setState({degrade:0,imageData:e,degradedImageData:e,degradedImageDataCache:a},(function(){return t.showDegradedImage(t.state.degrade)}))}))}},{key:"handleDragOver",value:function(e){e.preventDefault()}},{key:"handleDrop",value:function(e){if(e.preventDefault(),"file"===e.dataTransfer.items[0].kind){var t=e.dataTransfer.items[0].getAsFile();this.loadImage(t)}}},{key:"handleQualityChange",value:function(e){var t=this;this.setState({degrade:Number(e.target.value)},(function(){return t.showDegradedImage(t.state.degrade)}))}},{key:"showDegradedImage",value:function(e){var t=this,a=this.state.degradedImageDataCache.get(e);a?this.setState({degradedImageData:a}):function(e,t){return b.apply(this,arguments)}(this.state.imageData,e).then((function(a){var n=new Map(t.state.degradedImageDataCache);n.set(e,a),t.setState({degradedImageData:a,degradedImageDataCache:n})}))}},{key:"loadSampleImage",value:function(){var e=this,t=new Image;t.onload=function(){var a=document.createElement("canvas");a.width=400,a.height=400,a.getContext("2d").drawImage(t,0,0,a.width,a.height),e.handleImageLoad(a.toDataURL("Image/jpeg"),1)},t.src=document.URL+"/sample.png"}},{key:"loadImage",value:function(e){var t=this;if(e){var a=new FileReader;a.onload=function(e){return t.handleImageLoad(e.target.result)},a.readAsDataURL(e)}}},{key:"showImageSelector",value:function(){document.getElementById("imageSelector").click()}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"imageEditor",onDragOver:function(t){return e.handleDragOver(t)},onDrop:function(t){return e.handleDrop(t)}},r.a.createElement("div",{className:"buttonContainer"},r.a.createElement("input",{type:"file",id:"imageSelector",accept:"image/*",onChange:function(t){return e.loadImage(t.target.files[0])}}),r.a.createElement("input",{type:"button",value:"\uc774\ubbf8\uc9c0 \ubd88\ub7ec\uc624\uae30",onClick:function(){return e.showImageSelector()}})),r.a.createElement("img",{className:"image",alt:"\ubd88\ub7ec\uc628 \uc774\ubbf8\uc9c0",src:this.state.degradedImageData}),r.a.createElement("input",{type:"range",min:"0",max:"100",step:"5",value:this.state.degrade,onChange:function(t){return e.handleQualityChange(t)}}))}}]),a}(r.a.Component);function y(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u,null),r.a.createElement(E,null),r.a.createElement(o,null))}l.a.render(r.a.createElement(y,null),document.getElementById("root"))},2:function(e,t,a){}},[[10,1,2]]]);
//# sourceMappingURL=main.5c841fe3.chunk.js.map